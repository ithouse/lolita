var msie6=$.browser.msie&&$.browser.version=="6.0";var Opera=$.browser.opera;var zi=100;jQuery.fn.buildContainers=function(A){return this.each(function(){if($(this).is("[inited=true]")){return }this.options={containment:"document",elementsPath:"elements/"};$.extend(this.options,A);var B=$(this);B.attr("inited","true");B.addClass(B.attr("skin"));if(!B.attr("minimized")){B.attr("minimized","false")}B.find(".n:first").attr("unselectable","on");if(!B.find(".n:first").html()){B.find(".n:first").html("&nbsp;")}var C=B.attr("icon")?B.attr("icon"):"";var D=B.attr("buttons")?B.attr("buttons"):"";B.setIcon(C,this.options.elementsPath);B.setButtons(D,this.options.elementsPath);if(B.attr("width")){B.css({width:B.attr("width")+"px"})}if(B.attr("height")){B.find(".c:first , .content:first").css("height",B.attr("height")-B.find(".n:first").outerHeight()-(B.find(".s:first").outerHeight()))}if(B.hasClass("draggable")){B.css({position:"absolute",margin:0});B.find(".n:first").css({cursor:"move"});B.css({zIndex:zi++});B.draggable({handle:".n:first",cancel:".c",delay:0,containment:this.options.containment});B.mousedown(function(){$(this).css({zIndex:zi++})})}if(B.hasClass("resizable")){B.containerResize()}if(B.attr("minimized")=="true"){B.attr("minimized","false");B.minimize(this.options.elementsPath)}if(B.attr("iconized")=="true"){B.attr("iconized","false");B.iconize()}})};jQuery.fn.containerResize=function(){var A=$(this).hasClass("draggable");$(this).resizable({handles:A?"":"s",minWidth:150,minHeight:150,iframeFix:true,helper:"proxy",stop:function(E,F){var D=msie6||Opera?F.helper:$(this);var B=D.outerHeight()-$(this).find(".n:first").outerHeight()-($(this).find(".s:first").outerHeight());$(this).find(".c:first , .content:first").css({height:B});if(!A){var C=$(this).attr("width")&&$(this).attr("width")>0?$(this).attr("width"):"100%";$(this).css({width:C})}}})};jQuery.fn.setIcon=function(A,B){if(A!=""){$(this).find(".ne:first").prepend("<img class='icon' src='"+B+"icons/"+A+"' style='position:absolute'>");$(this).find(".n:first").css({paddingLeft:15})}else{$(this).find(".n:first").css({paddingLeft:0})}};jQuery.fn.setButtons=function(E,F){var A=$(this);if(E!=""){var D=E.split(",");$(this).find(".ne:first").append("<div class='buttonBar'></div>");for(var C in D){if(D[C]=="c"){$(this).find(".buttonBar:first").append("<img src='"+F+$(this).attr("skin")+"/close.png' class='close'>");$(this).find(".close:first").bind("click",function(){A.fadeOut(200)})}if(D[C]=="m"){$(this).find(".buttonBar:first").append("<img src='"+F+$(this).attr("skin")+"/min.png' class='minimizeContainer'>");$(this).find(".minimizeContainer:first").bind("click",function(){A.minimize(F)});$(this).find(".n:first").bind("dblclick",function(){A.minimize(F)})}if(D[C]=="p"){$(this).find(".buttonBar:first").append("<img src='"+F+$(this).attr("skin")+"/print.png' class='printContainer'>");$(this).find(".printContainer:first").bind("click",function(){})}if(D[C]=="i"){$(this).find(".buttonBar:first").append("<img src='"+F+$(this).attr("skin")+"/iconize.png' class='iconizeContainer'>");$(this).find(".iconizeContainer:first").bind("click",function(){A.iconize()})}}var B=$.browser.mozilla||$.browser.safari;$(this).find(".buttonBar:first img").css({opacity:0.5,cursor:"pointer"}).mouseover(function(){if(B){$(this).fadeTo(200,1)}}).mouseout(function(){if(B){$(this).fadeTo(200,0.5)}})}};jQuery.fn.minimize=function(A){this.each(function(){var B=$(this);if($(this).attr("minimized")=="false"){this.w=B.outerWidth();this.h=B.outerHeight();B.find(".icon:first").hide();B.find(".o:first").slideUp(100,function(){});B.animate({height:B.find(".n:first").outerHeight()+B.find(".s:first").outerHeight()},100,function(){B.find(".icon:first").show()});B.attr("minimized","true");B.find(".minimizeContainer:first").attr("src",A+$(this).attr("skin")+"/max.png");B.resizable("destroy")}else{B.find(".o:first").slideDown(100,function(){});if(B.hasClass("resizable")){B.containerResize()}B.attr("minimized","false");B.find(".icon:first").hide();B.animate({height:this.h},100,function(){B.find(".icon:first").show()});B.find(".minimizeContainer:first").attr("src",A+$(this).attr("skin")+"/min.png")}})};jQuery.fn.iconize=function(){return this.each(function(){var A=$(this);A.attr("w",A.attr("width")&&A.attr("width")>0?(!A.hasClass("resizable")?A.attr("width"):A.width()):"100%");A.attr("h",A.height());A.attr("t",A.css("top"));A.attr("l",A.css("left"));A.resizable("destroy");if(!$.browser.msie){A.find(".no:first").fadeOut("fast");A.animate({height:"32px",width:"32px",left:0},200)}else{A.find(".no:first").hide();A.css({height:"32px",width:"32px",left:0})}A.append("<img src='elements/icons/"+(A.attr("icon")?A.attr("icon"):"restore.png")+"' class='restoreContainer' width='32'>");A.find(".restoreContainer:first").bind("click",function(){if(!$.browser.msie){A.find(".no:first").fadeIn("fast");A.animate({height:A.attr("h"),width:A.attr("w"),left:A.attr("l")},200);A.find(".c:first , .content:first").css("height",A.attr("h")-A.find(".n:first").outerHeight()-(A.find(".s:first").outerHeight()))}else{A.find(".no:first").show();A.css({width:A.attr("w"),left:A.attr("l")});A.find(".c:first , .content:first").css("height",A.attr("h")-A.find(".n:first").outerHeight()-(A.find(".s:first").outerHeight()))}A.find(".restoreContainer:first").remove();if(A.hasClass("resizable")){A.containerResize()}})})};